<form [formGroup]="registroForm" class="p-fluid">
  <!-- Inputs agrupados -->
  <div class="grid">
    <div class="col-12 md:col-4">
      <input
        pInputText type="date" formControlName="fechaIngreso"
        [attr.max]="todayISO" placeholder="Fecha ingreso" class="w-full"
      />
      <small
        class="p-error"
        *ngIf="registroForm.get('fechaIngreso')?.touched && registroForm.get('fechaIngreso')?.hasError('required')"
      >Fecha requerida</small>
    </div>

    <div class="col-12 md:col-4">
      <input
        pInputText formControlName="numeroBL" placeholder="N° BL" class="w-full"
      />
      <small
        class="p-error"
        *ngIf="registroForm.get('numeroBL')?.touched && registroForm.get('numeroBL')?.hasError('required')"
      >BL requerido</small>
    </div>

    <div class="col-12 md:col-4">
      <input
        pInputText formControlName="numeroTarja" placeholder="Tarja" class="w-full"
      />
      <small
        class="p-error"
        *ngIf="registroForm.get('numeroTarja')?.touched && registroForm.get('numeroTarja')?.hasError('required')"
      >Tarja requerida</small>
    </div>
  </div>

  <!-- Botón "Ingresar vehículo" ahora entre inputs y botones Guardar/Cancelar -->
  <div class="flex justify-content-end gap-3 mt-4">
    <button
      pButton type="button" label="Ingresar vehículo" icon="pi pi-car"
      (click)="openVehiculoForm()" class="p-button-primary"
    ></button>
  </div>

  <!-- Botones Guardar y Cancelar -->
  <div class="flex justify-content-end gap-3 mt-2">
    <button
      pButton type="button" label="Cancelar" icon="pi pi-times" severity="danger"
      (click)="onCancel()" class="p-button-outlined"
    ></button>
    <button
      pButton type="submit" label="Guardar" icon="pi pi-check" (click)="confirmSave()"
    ></button>
  </div>

  <!-- Formulario embebido -->
  <div *ngIf="showVehiculoForm" class="mt-4">
    <app-vehiculoform
      [vehiculo]="registroForm.get('vehiculo')?.value"
      modo="crear"
      (guardar)="onVehiculoGuardar($event)"
      (cancelar)="showVehiculoForm = false"
    ></app-vehiculoform>
  </div>
</form>
