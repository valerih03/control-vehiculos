<p-dialog header="{{ getHeaderText() }}"
          [(visible)]="visible"
          (onShow)="onShow()"
          (onHide)="cerrarDialogo()"
          [modal]="true"
          [style]="{width: '50vw', minHeight: '400px'}"
          [contentStyle]="{padding:'2rem'}">

  <!-- Tipo -->
  <p-selectButton [options]="tiposDespacho"
                  [(ngModel)]="tipoSeleccionado"
                  optionLabel="name"
                  (onChange)="cambiarTipoDespacho()"
                  *ngIf="!modoVisualizacion">
  </p-selectButton>

  <!-- VIN -->
  <p-listbox [options]="vinsRegistrados"
             [(ngModel)]="vinSeleccionado"
             optionLabel="vin"
             [filter]="true"
             (onChange)="seleccionarVin($event)"
             *ngIf="!modoVisualizacion">
    <ng-template let-item pTemplate="item">
      <div>{{item.vin}} - {{item.marca}} ({{item.anio}})</div>
    </ng-template>
  </p-listbox>

  <!-- Campos de despacho según tipo -->
  <div *ngIf="tipoSeleccionado.value==='DM'">
    <label>N° BL</label>
    <input pInputText [(ngModel)]="despacho.bl" [readonly]="modoVisualizacion"/>
    <label>DUCA</label>
    <input pInputText [(ngModel)]="despacho.duca" [readonly]="modoVisualizacion"/>
  </div>
  <div *ngIf="tipoSeleccionado.value==='TRANSITO'">
    <label>Copia BL</label>
    <input pInputText [(ngModel)]="despacho.copiaBL" [readonly]="modoVisualizacion"/>
    <label>Tarja</label>
    <input pInputText [(ngModel)]="despacho.tarja" [readonly]="modoVisualizacion"/>
    <label>DUCA</label>
    <input pInputText [(ngModel)]="despacho.duca" [readonly]="modoVisualizacion"/>
  </div>

  <ng-template pTemplate="footer">
    <p-button label="Cerrar"
              icon="pi pi-times"
              class="p-button-text"
              (click)="cerrarDialogo()"></p-button>

    <p-button *ngIf="!modoVisualizacion"
              label="Guardar"
              icon="pi pi-check"
              (click)="onGuardar()"></p-button>
  </ng-template>
</p-dialog>
